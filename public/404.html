
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecting...</title>
    <script>
      (function () {
        const url = new URL(window.location.href);

        // Try to extract code and state from any embedded query string
        const rawQuery = url.search || "";
        const match = rawQuery.match(/code=([^&]+).*state=([^&]+)/);
        if (match) {
          const code = match[1];
          const state = match[2];
          const cleanedRedirect = `/okta-lovable-auth-flow/?code=${code}&state=${state}`;
          console.log("üîÅ Redirecting to cleaned OAuth callback:", cleanedRedirect);
          window.location.replace(cleanedRedirect);
        } else {
          // fallback to home
          window.location.replace('/okta-lovable-auth-flow/');
        }
      })();
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
